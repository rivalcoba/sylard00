"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _fs=_interopRequireDefault(require("fs")),_path=_interopRequireDefault(require("path")),_Collection=_interopRequireDefault(require("../models/Collection"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}// Home Controllers
const index=(a,b)=>{b.locals.user&&"colaborator"==b.locals.user.role?b.redirect(`/collections`):b.locals.user?b.redirect("/dashboard"):b.render("index/home",{})},contact=(a,b)=>{b.render("index/contact",{title:"Contact",content:"Contact the administrator"})},credits=(a,b)=>{b.render("index/contact",{title:"Credits",content:"Site builded by Drako-YonceCe"})},dashboard=async(a,b)=>{// Get Collecionts
const c=await _Collection.default.find().populate("user").exec();// Collections to JSON
let d=c.map(a=>a.toJSON());b.render("index/dashboard",{collections:d})},documentation=(a,b)=>{b.render("index/documentation",{title:"Sylard Documentation",content:"You can find the instructions to use Sylard in this place."})},usermanual=(a,b)=>{b.render("index/register",{title:"User Manual",content:"Terms and conditions are presenting bellow...."})},terms=(a,b)=>{b.render("index/register",{title:"Terms",content:"Terms and conditions are presenting bellow...."})},test=(a,b)=>{b.render("index/test")},vuetest=(a,b)=>{b.render("index/vuetest")},audioannotations=(a,b)=>{b.render("index/audioannotations")},cleanEaf=(a,b)=>{let c=_path.default.join(__dirname,"..","public","eaf");_fs.default.readdir(c,(a,d)=>{if(a)return b.json(a);for(const e of d)_fs.default.unlink(_path.default.join(c,e),a=>{if(a)return b.json(a)});b.json({return:"ok"})})};// Exporting Controllers
var _default={index,contact,credits,dashboard,documentation,usermanual,terms,test,vuetest,audioannotations,cleanEaf};exports.default=_default;