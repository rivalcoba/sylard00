"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _path=_interopRequireDefault(require("path")),_jsonReader=_interopRequireDefault(require("../helpers/jsonReader")),_User=_interopRequireDefault(require("../models/User"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}// DELETE async
const edit=(a,b)=>{let c=_jsonReader.default.readFileSync(_path.default.join(__dirname,"..","assets","languages.json")),d=_jsonReader.default.readFileSync(_path.default.join(__dirname,"..","assets","countries.json")),e="";a.user.spokenLanguages.forEach(a=>{e=e.concat(`${a.name} | ${a.gid}\n`)}),e=e.trim(),console.log(e),b.render("user/edit",{spokenLang:e,nativeLanguages:c,countries:d})},editUser=async(a,b)=>{// Get values from req.body
const{name:c,lastName:d,secLastName:e,email:f,spokenLanguages:g,country:h,about:i}=a.body;// Update user
// Flash Message
// Get the info from
await a.user.editUser({name:c,lastName:d,secLastName:e,email:f,spokenLanguages:g,country:h,about:i}),a.flash("success_msg","Sus cambios se han guardado"),b.redirect("/dashboard")},editPassword=(a,b)=>{b.render("user/editPassword")},editUserPassword=async(a,b)=>{const{password:c}=a.body;await a.user.editPassword(c),a.flash("success_msg","Password editado con exito"),b.redirect("/dashboard")},resetPassword=(a,b)=>{b.render("user/resetPassword")},resetUserPassword=async(a,b)=>{// Se busca usuario con el password
await a.user.resetPassword(),a.flash("success_msg","Su password provisional se ha enviado a su correo"),b.redirect("/")},index=(a,b)=>{b.send("user list")},api_getUsers=async(a,b)=>{const c=await _User.default.find().exec();b.status(200).json(c)};var _default={edit,editUser,editPassword,editUserPassword,resetPassword,resetUserPassword,index,api_getUsers};exports.default=_default;