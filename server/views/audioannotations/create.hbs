<div> Crear audioannotations</div>
<!--
<form action="/audioannotations/uploadfile" enctype="multipart/form-data" method="POST"> 
   <input type="file" name="myFile" />
   <input type="submit" value="Upload a file"/>
</form>-->
<form action="/audioannotations/uploadfile" method="POST" id="form" enctype="multipart/form-data">
            <label for="profilePic"></label>
            <input id=profilePic type='file' name='myFile'  />
            <input type="submit">
        </form>

<form class="col s12" action="/audioannotations/add" method="post" id='form2'>
<!--
<input type="file"
       id="eaf" name="eaf"
       accept="eaf/eaf">
       <br><br>

       a_id:String,
  eaf:String,
  titulo:String,
  description: { type: String },
  genero:String,
  duracion:String,
  mp3_url:String,
  https://code.tutsplus.com/es/tutorials/file-upload-with-multer-in-node--cms-32088  -->    


 <label for="titulo">Titulo:</label>
  <input type="text" id="titulo" name="titulo"><br><br>
  <label for="descripcion">Descripcion:</label>
  <input type="text" id="description" name="description"><br><br>
   <label for="coleccion">Coleccion:</label>
     <div>
  <datalist id="colection"></datalist>
  <select id="colection" name="colection">
     {{#each collections}}
          <option 
          {{!-- id = '{{_id}}' --}}
          value = "{{_id}}" 
          name= "{{name}}">
        {{name}}
        </option>
        {{/each}}
        </select>
 </datalist>
 </div>
 <label for="genero">Genero:</label>
  <input type="text" id="genero" name="genero"><br><br>
  <label for="duracion">Duracion</label><br><br>
  <label for="mp3_url">MP3</label>
  <input type="text" id="mp3_url" name="mp3_url"><br><br>

 
  
<button type="submit">Submit</button>
</form>
<script> 
   const $form    =document.querySelector('#form')
   $form.addEventListener('submit', (event) =>  {
     event.preventDefault()
      const formData  =new FormData (event.currentTarget)
   //debugger
   longitudmp3();
   })  

function longitudmp3(mp3file){ 
const mp3file = 'https://raw.githubusercontent.com/prof3ssorSt3v3/media-sample-files/master/doorbell.mp3'
const audioContext = new (window.AudioContext || window.webkitAudioContext)()
const request = new XMLHttpRequest()
request.open('GET', mp3file, true)const mp3file = 'https://raw.githubusercontent.com/prof3ssorSt3v3/media-sample-files/master/doorbell.mp3'

request.responseType = 'arraybuffer'
request.onload = function() {
    audioContext.decodeAudioData(request.response,
        function(buffer) {
            let duration = buffer.duration
            console.log(duration)
            document.write(duration)
        }
    )
}
request.send()
}
</script>